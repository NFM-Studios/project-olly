"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function XM_Popup(t){var p={overlay:{color:"0, 0, 0",opacity:.8,closeOnClick:!0,animation:{type:"fade",ease:"ease-in-out",speed:.3}},align:"center",sticky:!1,animation:{type:"fade",ease:"ease-in-out",speed:.3,translateOffset:100},closeOnKey:27},r={},n=function(){r.overlay=document.createElement("div"),e(),document.body.appendChild(r.overlay)},e=function(){r.overlay.style.width="100%",r.overlay.style.height="100%",r.overlay.style.backgroundColor="rgba(".concat(p.overlay.color,", ").concat(p.overlay.opacity,")"),r.overlay.style.position="fixed",r.overlay.style.top=0,r.overlay.style.left=0,r.overlay.style.zIndex=1e5,a(),o()},o=function(){"fade"===p.overlay.animation.type&&(r.overlay.style.transition="opacity ".concat(p.overlay.animation.speed,"s ").concat(p.overlay.animation.ease,", \n      visibility ").concat(p.overlay.animation.speed,"s ").concat(p.overlay.animation.ease))},a=function(){"static"===p.overlay.animation.type?r.overlay.style.display="none":"fade"===p.overlay.animation.type&&(r.overlay.style.opacity=0,r.overlay.style.visibility="hidden")},i=function(){if(r.popupContainer=document.querySelector(p.container),!r.popupContainer)throw new Error("Couldn't find ".concat(p.container," in the DOM"));s()},s=function(){r.popupContainer.style.position=p.sticky?"fixed":"absolute",r.popupContainer.style.left="50%",r.popupContainer.style.zIndex=100001,u(),y()},l=function(){"center"===p.align?r.popupContainer.style.top="".concat(Math.abs(r.popupContainer.offsetHeight-window.innerHeight)/2,"px"):"top"===p.align?r.popupContainer.style.top=0:"bottom"===p.align&&(r.popupContainer.style.top="".concat(Math.abs(r.popupContainer.offsetHeight-window.innerHeight),"px")),p.sticky||(r.popupContainer.style.top="".concat(Number.parseInt(r.popupContainer.style.top,10)+window.scrollY,"px")),r.popupContainer.style.marginLeft="-".concat(r.popupContainer.offsetWidth/2,"px")},y=function(){"fade"===p.animation.type?r.popupContainer.style.transition="opacity ".concat(p.animation.speed,"s ").concat(p.animation.ease,", \n      visibility ").concat(p.animation.speed,"s ").concat(p.animation.ease):"translate-in"===p.animation.type||"translate-out"===p.animation.type||"zoom"===p.animation.type?r.popupContainer.style.transition="transform ".concat(p.animation.speed,"s ").concat(p.animation.ease,", \n      visibility ").concat(p.animation.speed,"s ").concat(p.animation.ease):"translate-in-fade"!==p.animation.type&&"translate-out-fade"!==p.animation.type&&"zoom-fade"!==p.animation.type||(r.popupContainer.style.transition="transform ".concat(p.animation.speed,"s ").concat(p.animation.ease,", \n      opacity ").concat(p.animation.speed,"s ").concat(p.animation.ease,", visibility ").concat(p.animation.speed,"s ").concat(p.animation.ease))},c=function(){l(),"static"===p.overlay.animation.type?r.overlay.style.display="block":"fade"===p.overlay.animation.type&&(r.overlay.style.opacity=1,r.overlay.style.visibility="visible"),"fade"===p.animation.type?(r.popupContainer.style.opacity=1,r.popupContainer.style.visibility="visible"):"translate-in"===p.animation.type||"translate-out"===p.animation.type?(r.popupContainer.style.visibility="visible",r.popupContainer.style.transform="translate(0, 0)"):"zoom"===p.animation.type?(r.popupContainer.style.visibility="visible",r.popupContainer.style.transform="scale(1)"):"translate-in-fade"===p.animation.type||"translate-out-fade"===p.animation.type?(r.popupContainer.style.opacity=1,r.popupContainer.style.visibility="visible",r.popupContainer.style.transform="translate(0, 0)"):"zoom-fade"===p.animation.type&&(r.popupContainer.style.opacity=1,r.popupContainer.style.visibility="visible",r.popupContainer.style.transform="scale(1)"),r.open=!0},u=function(){"fade"===p.animation.type?(r.popupContainer.style.opacity=0,r.popupContainer.style.visibility="hidden"):"translate-in"===p.animation.type?(r.popupContainer.style.visibility="hidden",r.popupContainer.style.transform="translate(0, -".concat(p.animation.translateOffset,"px)")):"translate-out"===p.animation.type?(r.popupContainer.style.visibility="hidden",r.popupContainer.style.transform="translate(0, ".concat(p.animation.translateOffset,"px)")):"zoom"===p.animation.type?(r.popupContainer.style.visibility="hidden",r.popupContainer.style.transform="scale(0)"):"translate-in-fade"===p.animation.type?(r.popupContainer.style.opacity=0,r.popupContainer.style.visibility="hidden",r.popupContainer.style.transform="translate(0, -".concat(p.animation.translateOffset,"px)")):"translate-out-fade"===p.animation.type?(r.popupContainer.style.opacity=0,r.popupContainer.style.visibility="hidden",r.popupContainer.style.transform="translate(0, ".concat(p.animation.translateOffset,"px)")):"zoom-fade"===p.animation.type&&(r.popupContainer.style.opacity=0,r.popupContainer.style.visibility="hidden",r.popupContainer.style.transform="scale(0)"),r.popupContainer.style.display="block",a(),r.open=!1},f=function(){r.open?u():c()},m=function(){var t=document.querySelectorAll(p.trigger);if(!t.length)throw new Error("Couldn't find ".concat(p.trigger," in the DOM"));var n=!0,e=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){a.value.addEventListener("click",f)}}catch(t){e=!0,o=t}finally{try{n||null==i.return||i.return()}finally{if(e)throw o}}p.overlay.closeOnClick&&r.overlay.addEventListener("click",u),p.closeOnKey&&window.addEventListener("keydown",function(t){t.keyCode===p.closeOnKey&&r.open&&u()})};return function t(n,e){var o;for(var a in e)"object"!==_typeof(e[a])||e[a]instanceof Date?e[a]instanceof Date?n[a]=new Date(e[a].getTime()):n[a]=e[a]:(o=e[a]instanceof Array?[]:{},void 0===n[a]&&(n[a]=o),t(n[a],e[a]))}(p,t),n(),i(),m(),window.addEventListener("resize",l),r}