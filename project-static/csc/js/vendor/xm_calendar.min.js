"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XM_Calendar(e){var r={container:".calendar",yearMonthEl:{container:".calendar-header-top",yearSelector:".calendar-year",monthSelector:".calendar-month"},weekDaysEl:{container:".calendar-header-bottom",child:{selectors:["calendar-week-day"],elementType:"p"}},daysEl:{container:".calendar-body",child:{selectors:["calendar-day"],elementType:"div",child:{selectors:["calendar-day-number"],elementType:"p"}}},controls:{container:".calendar-controls",right:".control-next",left:".control-previous"},displayDate:{year:(new Date).getFullYear(),month:(new Date).getMonth()},lang:{idiom:"enUS",abbr:!1,breakpoint:680},days:{enUS:{long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}},months:{enUS:["January","February","March","April","May","June","July","August","September","October","November","December"]},events:[],calendarRowLength:7,writeEvents:!0,showEventsOnHover:!1},n=this,t=function(){if(window.innerWidth<=r.lang.breakpoint)for(var e=0;e<r.weekDaysEl.el.children.length;e++)r.weekDaysEl.el.children[e].innerHTML=r.days[r.lang.idiom].short[e];else for(var n=0;n<r.weekDaysEl.el.children.length;n++)r.weekDaysEl.el.children[n].innerHTML=r.days[r.lang.idiom].long[n]},a=function(){r.rootEl=document.querySelector(r.container),p(r.rootEl,r.container)},o=function(){r.yearMonthEl.containerEl||(r.yearMonthEl.containerEl=r.rootEl.querySelector(r.yearMonthEl.container)),r.yearMonthEl.yearEl||(r.yearMonthEl.yearEl=r.yearMonthEl.containerEl.querySelector(r.yearMonthEl.yearSelector)),r.yearMonthEl.monthEl||(r.yearMonthEl.monthEl=r.yearMonthEl.containerEl.querySelector(r.yearMonthEl.monthSelector)),r.yearMonthEl.yearEl.innerHTML=r.displayDate.year,r.yearMonthEl.monthEl.innerHTML=r.months[r.lang.idiom][r.displayDate.month]},l=function(){var e=new Date(r.displayDate.year,++r.displayDate.month,1);i(e)},c=function(){var e=new Date(r.displayDate.year,--r.displayDate.month,1);i(e)},i=function(e){r.displayDate.year=e.getFullYear(),r.displayDate.month=e.getMonth(),r.displayDate.day=e.getDate(),o(),s()},d=function(){r.weekDaysEl.el=r.rootEl.querySelector(r.weekDaysEl.container),r.weekDaysEl.el.innerHTML="";for(var e=function(e){var n=document.createElement(r.weekDaysEl.child.elementType);r.lang.abbr?n.innerHTML=r.days[r.lang.idiom].short[e]:n.innerHTML=r.days[r.lang.idiom].long[e],r.weekDaysEl.child.selectors.forEach(function(e){n.classList.add(e)}),r.weekDaysEl.el.appendChild(n)},n=0;n<r.calendarRowLength;n++)e(n)},s=function(){r.calendarDays=[];var e={year:r.displayDate.year,month:r.displayDate.month,day:1},n=new Date(e.year,e.month,e.day),t=n.getDay(),a=e.month;for(0!==t&&(e.day-=t,n=new Date(e.year,e.month,e.day));a===(n=u(n,e)).getMonth(););y()},y=function(){r.daysEl.el||(r.daysEl.el=r.rootEl.querySelector(r.daysEl.container)),r.daysEl.el.innerHTML="",r.calendarDays.forEach(function(e){var n=document.createElement(r.daysEl.child.elementType),t=e.event?document.createElement("a"):document.createElement(r.daysEl.child.child.elementType);r.daysEl.child.selectors.forEach(function(e){n.classList.add(e)}),r.daysEl.child.child.selectors.forEach(function(e){t.classList.add(e)}),e.disabled&&n.classList.add("disabled"),e.current&&n.classList.add("current"),e.event&&(t.setAttribute("href",r.linksTo),n.classList.add("event"),r.writeEvents&&(r.showEventsOnHover&&n.classList.add("event-popup"),e.event.el=h(e.event),n.appendChild(e.event.el))),t.innerHTML=e.day,n.appendChild(t),r.daysEl.el.appendChild(n)})},h=function(e){var t=document.createElement("div");return t.classList.add("event-list"),e.forEach(function(e){var n=document.createElement("p");n.classList.add("event-item",e.type),n.innerHTML=e.name,t.appendChild(n)}),t},u=function(e,n){for(var t=0;t<r.calendarRowLength;t++)r.calendarDays.push({weekDay:e.getDay(),day:e.getDate(),disabled:e.getMonth()!==n.month,current:f(e),event:E(e)}),e=new Date(n.year,n.month,++n.day);return e},E=function(e){return void 0!==r.events[e]&&r.events[e]},f=function(e){var n=new Date,t=n.getFullYear()===e.getFullYear(),a=n.getMonth()===e.getMonth(),r=n.getDate()===e.getDate();return t&&a&&r},m=function(){r.controls.el={},r.controls.el.container=r.rootEl.querySelector(r.controls.container),p(r.controls.el.container,r.controls.container),r.controls.el.right=r.controls.el.container.querySelector(r.controls.right),p(r.controls.el.right,r.controls.right),r.controls.el.right.addEventListener("click",l),r.controls.el.left=r.controls.el.container.querySelector(r.controls.left),p(r.controls.el.left,r.controls.left),r.controls.el.left.addEventListener("click",c)},p=function(e,n){var t=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(!e)throw t?new Error("Can't find ".concat(n," inside ").concat(t)):new Error("Can't find ".concat(n," in the DOM"))};(function e(n,t){var a;for(var r in t)"object"!==_typeof(t[r])||t[r]instanceof Date?t[r]instanceof Date?n[r]=new Date(t[r].getTime()):n[r]=t[r]:(a=t[r]instanceof Array?[]:{},void 0===n[r]&&(n[r]=a),e(n[r],t[r]))})(r,e),a(),o(),d(),s(),m(),(n.config=r).lang.abbr||(t(),window.addEventListener("resize",t))}